generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id      Int     @id @default(autoincrement())
  email   String  @unique
  stories Story[]
}

model Story {
  id      Int     @id @default(autoincrement())
  title   String
  ownerId Int
  Scene   Scene[]
  owner   User    @relation(fields: [ownerId], references: [id])
}

model Persona {
  id                                           Int         @id @default(autoincrement())
  name                                         String
  description                                  String
  Relations_Relations_sourcePersonaIdToPersona Relations[] @relation("Relations_sourcePersonaIdToPersona")
  Relations_Relations_targetPersonaIdToPersona Relations[] @relation("Relations_targetPersonaIdToPersona")
}

model Scene {
  id          Int    @id @default(autoincrement())
  title       String
  description String
  storyId     Int
  story       Story  @relation(fields: [storyId], references: [id])
}

model Relations {
  sourcePersonaId                            Int
  targetPersonaId                            Int
  description                                String[] @db.Char
  Persona_Relations_sourcePersonaIdToPersona Persona  @relation("Relations_sourcePersonaIdToPersona", fields: [sourcePersonaId], references: [id], onDelete: Cascade, map: "sourcePersonaId_FK")
  Persona_Relations_targetPersonaIdToPersona Persona  @relation("Relations_targetPersonaIdToPersona", fields: [targetPersonaId], references: [id], onDelete: Cascade, map: "targetPersonaId_FK")

  @@id([sourcePersonaId, targetPersonaId])
  @@index([sourcePersonaId], map: "fki_F")
  @@index([targetPersonaId], map: "fki_targetPersonaId_FK")
}
