generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id      Int     @id @default(autoincrement())
  email   String  @unique
  stories Story[]
}

model Story {
  id      Int     @id @default(autoincrement())
  title   String
  ownerId Int
  Scene   Scene[]
  owner   User    @relation(fields: [ownerId], references: [id])
}

model Persona {
  id                                         Int        @id @default(autoincrement())
  name                                       String
  description                                String
  Relation_Relation_sourcePersonaIdToPersona Relation[] @relation("Relation_sourcePersonaIdToPersona")
  Relation_Relation_targetPersonaIdToPersona Relation[] @relation("Relation_targetPersonaIdToPersona")
}

model Scene {
  id          Int    @id @default(autoincrement())
  title       String
  description String
  storyId     Int
  story       Story  @relation(fields: [storyId], references: [id])
}

model Relation {
  sourcePersonaId                           Int
  targetPersonaId                           Int
  description                               String[] @db.Char
  Persona_Relation_sourcePersonaIdToPersona Persona  @relation("Relation_sourcePersonaIdToPersona", fields: [sourcePersonaId], references: [id], onDelete: Cascade, map: "sourcePersonaId_FK")
  Persona_Relation_targetPersonaIdToPersona Persona  @relation("Relation_targetPersonaIdToPersona", fields: [targetPersonaId], references: [id], onDelete: Cascade, map: "targetPersonaId_FK")

  @@id([sourcePersonaId, targetPersonaId], map: "Relations_pkey")
  @@index([sourcePersonaId], map: "fki_F")
  @@index([targetPersonaId], map: "fki_targetPersonaId_FK")
}
